<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Eras Tour on Data</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }
        
        /* 新增全页面滚动容器 */
        .scroll-wrapper {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
        }
        
        /* 修改所有screen类为滚动吸附点 */
        .cover-container,
        .screen-intro,
        .screen-albums,
        .screen-overview,
        .screen-streams,
        .album-cover-page,
        .album-info-page,
        .wordcloud-page,
        .topsongs-page,
        .summary-page {
            height: 100vh;
            width: 100vw;
            scroll-snap-align: start;
        }

        /* 全屏封面容器 - 默认显示横版图 */
        .cover-container {
            height: 100vh;
            width: 100vw;
            background: 
                linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.5)),
                url('https://www.taylorswift.com/wp-content/uploads/sites/2529/2024/12/img-fearless-compressed.jpg') center/cover no-repeat;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            padding: 20px;
            box-sizing: border-box;
        }
        
        /* 移动端竖版图 */
        @media (max-width: 768px) and (orientation: portrait) {
            .cover-container {
                background: 
                    linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.5)),
                    url('https://assets.dmi.umgapps.com/assets/taylor-swift/landing-images/1678544276252-2-v2.jpg') center/cover no-repeat;
            }
        }
        
        /* 标题样式 */
        .cover-title {
            max-width: 800px;
        }
        
        .cover-title h1 {
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 800;
            margin-bottom: 1rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        
        .cover-title p {
            font-size: clamp(1.2rem, 2.5vw, 1.8rem);
            opacity: 0.9;
            font-weight: 300;
            text-shadow: 0 1px 5px rgba(0,0,0,0.3);
        }
        
        /* 滚动提示 */
        .scroll-hint {
            position: absolute;
            bottom: 30px;
            animation: bounce 2s infinite;
        }

        /* 当页面滚动到第二页时 */
        body.scrolled .scroll-hint {
        color: black;
        text-shadow: 0 1px 3px rgba(255,255,255,0.3);
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-20px);}
            60% {transform: translateY(-10px);}
        }

    </style>
    <style>@import url("css/page2.css");</style>
    <style>@import url("css/page3.css");</style>
    <style>@import url("css/page4.css");</style>
    <style>@import url("css/page5.css");</style>
    <style>@import url("css/album.css");</style>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="scroll-wrapper">
    <div class="cover-container">
        <div class="cover-title">
            <h1>The Eras Tour on Data</h1>
            <p>用数据穿越 Taylor Swift 的音乐纪元</p>
            <p>数据可视化导论作业 曹彧 2300013198</p>
        </div>
        <div class="scroll-hint">
            ↓ 向下滚动 ↓
        </div>
    </div>

    <section class="screen-intro">
        <div class="intro-container">
            <div class="intro-content">
                <h2>Introduction</h2>
                <p class="full-text">泰勒·斯威夫特 (Taylor Swift) 是21世纪最具影响力的音乐人之一，拥有11张录音室专辑，全球销量超过2亿张。她的音乐跨越乡村、流行、民谣等多种风格，获得12座格莱美奖，创下多项音乐行业纪录。</p>
                <p class="full-text">为夺回前六张专辑的母带版权，对抗Scooter Braun和Big Machine Records未经她同意出售她的音乐作品的行为，完全掌控自己的音乐遗产，Taylor Swift于2021年对前6张专辑进行重录，目前已完成四张专辑的Taylor's Version。2025年5月，Taylor Swift 以3.6亿美元的价格成功回购她前六张专辑的母带版权，结束了与 Big Machine 公司长达六年的版权斗争，成为艺术家自主权的里程碑事件。</p>
                <p class="full-text">她的"Eras Tour"巡演，以不同专辑的时间顺序展开，呈现每张专辑对应Era的试听盛宴。总收入超过20.77亿美元，远超此前纪录保持者。</p>
                <p class="full-text">下面，让我们一起来走进这场 Eras Tour on Data，探索 Taylor Swift 从乡村音乐少女到流行天后的蜕变历程，用数据揭示她音乐宇宙中的创作密码与时代印记。</p>
                <p class="short-text">Taylor Swift 是21世纪最具影响力的音乐人之一，拥有11张录音室专辑，全球销量超过2亿张。她的音乐跨越乡村、流行、民谣等多种风格，获得12座格莱美奖，创下多项音乐行业纪录。</p>
                <p class="short-text">下面，让我们一起来走进这场 Eras Tour on Data，探索 Taylor Swift 从乡村音乐少女到流行天后的蜕变历程，用数据揭示她音乐宇宙中的创作密码与时代印记。</p>
            </div>
            <div class="intro-image">
                <!-- 替换为你的图片路径 -->
                <img src="https://www.taylorswift.com/wp-content/uploads/sites/2529/2025/06/tletter1-768x768.png" alt="Taylor Swift">
            </div>
        </div>
    </section>

    <section class="screen-albums">
        <div class="albums-title">
            <h2>The Eras Collection</h2>
            <p>点击专辑标志查看封面。注：TV 代表 Taylor's Version。为了夺回原始专辑的版权，Taylor 选择重录旧作。</p>
        </div>
        
        <div class="albums-grid">
            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Taylor-Swift.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Taylor Swift【2006】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Taylor-Swift.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Fearless.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Fearless【2008】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Fearless.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Speak-Now.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Speak Now【2010】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Speak-Now.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Red.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Red【2012】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Red.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-1989.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">1989【2014】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-1989.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Reputation.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Reputation【2017】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Reputation.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Lover.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Lover【2019】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Lover.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Folklore.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Folklore【2020】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Folklore.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Evermore.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Evermore【2020】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Evermore.png" 
                            alt="Taylor Swift"
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>


            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Fearless-TV.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Fearless (TV)【2021】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Fearless-TV.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Red-TV.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Red (TV)【2021】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Red-TV.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Midnights.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Midnights【2022】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Midnights.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            
            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-Speak-Now-TV.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">Speak Now (TV)【2023】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-Speak-Now-TV.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>


            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-1989-TV.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">1989 (TV)【2023】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-1989-TV.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>


            <div class="album-card" data-album="taylor-swift">
                <div class="album-card-inner">
                    <div class="album-card-front">
                        <img src="img/logo-TTPD.png" 
                            alt="Taylor Swift" 
                            class="album-logo">
                        <p class="album-name">TTPD【2024】</p>
                    </div>
                    <div class="album-card-back">
                        <img src="img/img-TTPD.png" 
                            alt="Taylor Swift" 
                            class="album-cover"
                            note="">
                    </div>
                </div>
            </div>

            <!-- 复制上面的div，替换为其他14个专辑 -->
        </div>
    </section>

    <section class="screen-overview">
        <div class="overview-title">
            <h2>Number of Songs</h2>
            <p>专辑歌曲数量分布。共收录了Taylor Swift 11张专辑的230首歌曲（将Taylor's Version和原曲合并）。鼠标悬停查看详细信息。</p>
        </div>
        
        <div class="visualization-container">
            <div id="pie-chart" class="chart"></div>
            <div id="bar-chart" class="chart">
                <p>共计 230 首歌曲，其中 TTPD 专辑歌曲数目最多（包含黑胶专辑）</p>
            </div>
        </div>
    </section>

    <section class="screen-streams" id="streams-chart-section">
    <div class="chart-container">
        <h2>Streams of Albums</h2>
        <div class="chart-wrapper">
        <svg id="streams-chart"></svg>
        </div>
        <p class="chart-note">数据来源：Spotify (2025年4月11日统计)，将Taylor's Version与原版合并。鼠标悬停查看详细信息。</p>
        <div class="chart-analysis">
        <h3>数据解读</h3>
        <ul>
            <li><strong>1989</strong>：转型流行音乐后的巅峰之作，原版和重录版播放总量达141.77亿次</li>
            <li><strong>Lover</strong>：无重录，单张专辑播放总量最高</li>
            <li><strong>Midnights</strong>：疫情后另类风格获得艺术突破</li>
        </ul>
        </div>
    </div>
    
    </section>

    <!-- Taylor Swift 同名专辑部分 -->
    <section class="album-section" id="eras-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-Eras.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">Let's Start!</h2>
                    <p class="album-subtitle">让我们从同名专辑到TTPD，开启这场时代之旅吧～</p>
                    <p class="album-brief">💡提示：开启音量效果更佳</p>
                </div>
            </div>
        </section>
    </section>

    <!-- Taylor Swift 同名专辑部分 -->
    <section class="album-section" id="taylor-swift-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-Taylor-Swift.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">Taylor Swift</h2>
                    <p class="album-subtitle">乡村音乐的纯真起点 · 2006年出道专辑</p>
                    <p class="album-brief">16岁的天才少女用吉他谱写的青春诗篇</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="taylor-swift-audio" src="songs/TSW.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="taylor-swift-audio" style="padding: 10px 20px; font-size: 16px; background-color: #57a764; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #1D4737, #81A757)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/1/1f/Taylor_Swift_-_Taylor_Swift.png" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3>专辑介绍</h3>
                    <p>《Taylor Swift》是泰勒·斯威夫特（Taylor Swift）的首张录音室专辑，由内森·查普曼和罗伯特·埃利斯·奥拉尔制作，标准版收录了11首歌曲，加曲版收录15首歌曲，于2006年10月24日由大机器唱片公司发行。</p>
                    <p>2007年，《Taylor Swift》在公告牌乡村乐专辑榜年终夺下季军，在公告牌二百强专辑榜排名第19；2008年，专辑凭借约204万的销量在公告牌二百强专辑榜排名第5；2008年，收录曲《Our Song》获得乡村音乐电视奖"年度女歌手歌曲MV"和"年度歌曲MV"奖项。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #57a764, #1d4247)">
            <div class="wordcloud-container">
                <h3 style="color:#E7DBCC">歌词词云</h3>
                <p style="color:#E7DBCC">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/TSW_wordcloud.png" alt="Taylor Swift专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7DBCC">早期乡村音乐中，"know"、"back"、"think"等词汇高频出现，这些词能强化故事讲述、情感直白，更依赖认知动词直接表达内心活动。</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page">
            <div class="topsongs-container">
                <h3>专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="tsw-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>《Our Song》作为本专辑冠军单曲，播放量高达3.8亿次，展现了Taylor早期乡村风格的感染力</p>
                </div>
            </div>
        </section>

    </section>

    <!-- Fearless 部分 -->
    <section class="album-section" id="Fearless-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-Fearless.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">Fearless</h2>
                    <p class="album-subtitle">闪耀的乡村流行跨界 · 2008年格莱美年度专辑</p>
                    <p class="album-brief">金色流苏下的青春宣言，奠定全球巨星地位的突破之作</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="fearless-audio" src="songs/FER.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="fearless-audio" style="padding: 10px 20px; font-size: 16px; background-color: #6E4823; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px;  animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #6E4823, #CBA863)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/8/86/Taylor_Swift_-_Fearless.png?20230827021325" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3 style="color:#976F34; border-bottom: 2px solid #6E4823">专辑介绍</h3>
                    <p>《Fearless》是泰勒·斯威夫特的第二张录音室专辑，于2008年11月11日发行。专辑融合乡村与流行元素，诞生了《Love Story》《You Belong with Me》等现象级单曲。它成为21世纪美国最畅销的乡村专辑，并获得第52届格莱美年度专辑奖。</p>
                    <p>2021年4月9日，泰勒发布重录版《Fearless (Taylor's Version)》，新增6首"From The Vault"未发行曲目。原版专辑已获RIAA钻石认证（1000万张），重录版首周销量达29.1万张，创下乡村专辑最高首周纪录。</p>
                    <p>专辑名称源自泰勒对音乐创作的信念："真正的恐惧不是失败，而是放弃尝试"。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #976F34, #6e5023)">
            <div class="wordcloud-container">
                <h3 style="color:#E1D4C2">歌词词云</h3>
                <p style="color:#E1D4C2">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/FER_wordcloud.png" alt="Fearless专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7DBCC">come，know等词高频出现反应了专辑的叙事特质：如，I keep waiting for you, but you never come (Love Story); 
                        And I don't know how it gets better than this (Fearless)</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page" style="background: linear-gradient(135deg, #6E4823, #CBA863)">
            <div class="topsongs-container">
                <h3 style="color: #6E4823">专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="fer-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>《Love Story》和《You Belong With Me》以累计超33亿次的惊人播放量，成为Fearless专辑现象级的双冠王，完美诠释了泰勒乡村流行跨界音乐的全球影响力，几乎家喻户晓。</p>
                </div>
            </div>
        </section>

    </section>

    <!-- Speak Now 部分 -->
    <section class="album-section" id="Speak-now-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-Speak-Now.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">Speak Now</h2>
                    <p class="album-subtitle">全创作个人宣言 · 首周销量104万拿到冠砖</p>
                    <p class="album-brief">紫色梦境中的成长独白，首张100%独立创作的音乐日记</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="speak-now-audio" src="songs/SPN.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="speak-now-audio" style="padding: 10px 20px; font-size: 16px; background-color: #72325F; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #2A122C, #72325F)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/5/5b/Taylor_Swift_-_Speak_Now_%28Taylor%27s_Version%29.png?20230506105004" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3 style="color:#2A122C; border-bottom: 2px solid #72325F">专辑介绍</h3>
                    <p>《Speak Now》是泰勒·斯威夫特第三张录音室专辑，2010年10月25日由Big Machine发行。这是泰勒首次独立创作所有歌曲的专辑，涵盖乡村流行和摇滚元素，首周销量达104.7万张，成为美国历史上首周销量最高的乡村专辑。</p>
                    <p>专辑包含《Mine》《Back to December》《Mean》等热门单曲，其中《Mean》获第54届格莱美最佳乡村歌曲和最佳乡村独唱。2023年7月7日发布的《Speak Now (Taylor's Version)》新增6首"From The Vault"曲目，首日即在Spotify创下1.2亿次播放纪录。</p>
                    <p>专辑名称源自泰勒对未说出口的真心话的思考，每首歌都像一封"未寄出的信"，直面爱情、遗憾与成长。滚石杂志将其评为"2010年代最伟大的50张乡村专辑"第7位。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #72325F, #4a2454)">
            <div class="wordcloud-container">
                <h3 style="color:#E7DBCC">歌词词云</h3>
                <p style="color:#E7DBCC">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/SPN_wordcloud.png" alt="Speak Now专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7DBCC">"Now" & "Say"的高频出现体现出即时性与对话感；"Know" & "See" 则是内心的独白与观察；而"Love"则体现出全专的情感主题。</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page" style="background: linear-gradient(135deg, #2A122C, #72325F)">
            <div class="topsongs-container">
                <h3 style="color: #2A122C">专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="spn-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>《Enchanted》“香水歌”以12.3亿播放量断层登顶，远超第二名近6亿，堪称《Speak Now》永恒的流量之王！</p>
                </div>
            </div>
        </section>

    </section>

    <!-- Red 部分 -->
    <section class="album-section" id="red-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-Red.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">Red</h2>
                    <p class="album-subtitle">从乡村到流行的蜕变宣言 · 美国公告牌二百强专辑榜冠军</p>
                    <p class="album-brief">用赤红笔墨书写心碎与成长，缔造《All Too Well》时代经典</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="red-audio" src="songs/RED.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="red-audio" style="padding: 10px 20px; font-size: 16px; background-color: #967862; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #400303, #731803)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/e/e8/Taylor_Swift_-_Red.png" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3 style="color:#400303; border-bottom: 2px solid #731803">专辑介绍</h3>
                    <p>《Red》是泰勒·斯威夫特第四张录音室专辑，2012年10月22日由Big Machine唱片发行。这张标志性专辑融合乡村、流行和摇滚元素，首周销量达120.8万张，成为2012年首周销量最高的专辑，并连续7周位居Billboard 200榜首。</p>
                    <p>专辑收录了《We Are Never Ever Getting Back Together》《I Knew You Were Trouble》《22》等热门单曲，其中《We Are Never Ever Getting Back Together》成为泰勒首支Billboard Hot 100冠军单曲。2021年11月12日发行的《Red (Taylor's Version)》包含30首歌曲，其中10分钟版的《All Too Well》创下史上最长冠军单曲纪录。</p>
                    <p>《Red》代表了泰勒音乐风格的重大转变，被《滚石》杂志评为"500张最伟大专辑"之一。专辑名称象征着她经历过的"炽热、疯狂"的情感，这些情感如红色般强烈而多变，记录了她从青少年向成年过渡的心路历程。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #967862, #400303)">
            <div class="wordcloud-container">
                <h3 style="color:#E7DBCC">歌词词云</h3>
                <p style="color:#E7DBCC">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/RED_wordcloud.png" alt="Red专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7DBCC">Red更多是关于回忆、遗憾和成长的专辑，许多歌曲（如《All Too Well》《The Moment I Knew》）都在回顾过去的关系，因此"time"（时间）的比重增加。同时Taylor当时对感情的态度较为强烈，"Loving him was red"。</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page" style="background: linear-gradient(135deg, #400303, #731803)">
            <div class="topsongs-container">
                <h3 style="color: #2A122C">专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="red-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>《I Knew You Were Trouble》以13.2亿播放量强势领跑，重录版《All Too Well (10分钟版)》成为现象级黑马！</p>
                </div>
            </div>
        </section>

    </section>

    <!-- 1989 部分 -->
    <section class="album-section" id="1989-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-1989-TV.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">1989</h2>
                    <p class="album-subtitle">流行帝国的加冕礼 · 2014年全球销量冠军专辑</p>
                    <p class="album-brief">合成器浪潮中的完美蜕变，定义2010年代流行音乐的美学革命</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="1989-audio" src="songs/NEN.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="1989-audio" style="padding: 10px 20px; font-size: 16px; background-color: #846578; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #5D4E5D, #92573C)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/f/f6/Taylor_Swift_-_1989.png" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3 style="color:#5D4E5D; border-bottom: 2px solid #92573C">专辑介绍</h3>
                    <p>《1989》是泰勒·斯威夫特彻底转型流行的里程碑之作，2014年10月27日发行。专辑首周销量达128.7万张，成为美国历史上首周销量最高的专辑之一，最终全球销量突破1400万。收录《Shake It Off》《Blank Space》《Bad Blood》等冠军单曲，其中《Blank Space》被《滚石》评为"2010年代最佳流行歌曲"。</p>
                    <p>这张以泰勒出生年份命名的专辑，融合80年代合成器流行与现代电子元素，荣获第58届格莱美年度专辑奖。2023年10月27日发布的《1989 (Taylor's Version)》打破Spotify单日播放纪录，新增5首"From The Vault"曲目中《Is It Over Now?》首周即登顶公告牌百强单曲榜。</p>
                    <p>《1989》标志着泰勒从乡村歌手到流行天后的彻底蜕变，其黑白极简封面和纽约都市美学重新定义了流行音乐人的视觉表达方式。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #846578, #967862)">
            <div class="wordcloud-container">
                <h3 style="color:#E7DBCC">歌词词云</h3>
                <p style="color:#E7DBCC">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/NEN_wordcloud.png" alt="1989专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7DBCC">相比前作《Red》的"撕心裂肺"，《1989》更聚焦于对爱情的反思与成长。wish，love等词汇的高频出现，反映了泰勒从"受伤的恋人"转向"成熟的叙事者"的创作进化，体现情感叙事的转变、创作主题的升华。
</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page" style="background: linear-gradient(135deg, #5D4E5D, #92573C)">
            <div class="topsongs-container">
                <h3 style="color: #2A122C">专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="nen-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>《Blank Space》以22亿播放量缔造流行神话，前四名均破16亿的恐怖数据，完美诠释何为'时代专辑'！</p>
                </div>
            </div>
        </section>

    </section>

    <!-- Reputation 部分 -->
    <section class="album-section" id="reputation-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-Reputation.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">Reputation</h2>
                    <p class="album-subtitle">暗黑美学的复仇诗篇 · 2017年全球现象级回归</p>
                    <p class="album-brief">蛇与火焰中的涅槃重生，用电子轰鸣打破所有质疑</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="reputation-audio" src="songs/REP.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="reputation-audio" style="padding: 10px 20px; font-size: 16px; background-color: #2C2C2C; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #2C2C2C, #515151)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/f/f2/Taylor_Swift_-_Reputation.png" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3 style="color:#2C2C2C; border-bottom: 2px solid #515151">专辑介绍</h3>
                        <p>《reputation》是泰勒·斯威夫特最具颠覆性的转型之作，2017年11月10日发行。这张以电子流行与陷阱音乐为骨架的专辑，首周销量达123.8万张，成为美国历史上首周销量最高的专辑之一。主打曲《Look What You Made Me Do》以毒蛇意象宣告"旧泰勒已死"，MV首日观看量破4300万，创下当时YouTube纪录。</p>
                        <p>专辑通过《Delicate》《Getaway Car》等作品展现媒体风暴后的脆弱与重生，其"复仇与救赎"的双重叙事被《滚石》评为"流行史上最精彩的叙事弧光"。</p>
                        <p>这张用报纸头条碎片拼贴而成的专辑封面，既是泰勒对公众形象的解构，也标志着艺术家从"全民甜心"到"自我主宰"的彻底蜕变。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #565656, #1F1F1F)">
            <div class="wordcloud-container">
                <h3 style="color:#E7E7E7">歌词词云</h3>
                <p style="color:#E7E7E7">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/REP_wordcloud.png" alt="Reputation专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7E7E7">"look"和"made"直接关系主打歌《Look What You Made Me Do》的核心句式，本质上是用最简单的动词，完成最尖锐的戏剧冲突构建。
</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page" style="background: linear-gradient(135deg, #2C2C2C, #515151)">
            <div class="topsongs-container">
                <h3 style="color: #2A122C">专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="rep-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>《Don't Blame Me》以12.8亿播放量险胜《Look What You Made Me Do》，暗黑系三巨头（前3名）集体破10亿，诠释复仇美学的商业威力！</p>
                </div>
            </div>
        </section>

    </section>

    <!-- Lover 部分 -->
    <section class="album-section" id="lover-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-Lover.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">Lover</h2>
                    <p class="album-subtitle">彩虹光谱下的浪漫革命 · 2019年全美音乐奖年度专辑</p>
                    <p class="album-brief">合成器流行的粉色浪潮，爱与平等的宣言书</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="lover-audio" src="songs/LVR.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="lover-audio" style="padding: 10px 20px; font-size: 16px; background-color: #8C4F66; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #8C4F66, #B8396B)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/c/cd/Taylor_Swift_-_Lover.png" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3 style="color:#8C4F66; border-bottom: 2px solid #B8396B">专辑介绍</h3>
                        <p>《Lover》是泰勒·斯威夫特第七张录音室专辑，于2019年8月23日发行。这张充满粉色调的专辑标志着她在《reputation》暗黑风格后的华丽转身，18首歌曲涵盖流行、合成器、乡村等多种风格。其中《Cruel Summer》虽初发行未作为单曲推广，却在2023年因巡演效应爆红，成为泰勒流媒体播放量最高的歌曲之一。</p>
            <p>专辑获得2019年全美音乐奖「年度专辑」，并诞生了《ME!》《You Need To Calm Down》《Lover》三支冠军单曲。特别的是，泰勒通过《The Man》探讨性别不平等，在《Soon You'll Get Better》中首次公开谈论母亲患癌经历，展现了前所未有的创作深度。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #B8396B, #76BAE0)">
            <div class="wordcloud-container">
                <h3 style="color:#E7E7E7">歌词词云</h3>
                <p style="color:#E7E7E7">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/LVR_wordcloud.png" alt="Reputation专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7E7E7">《Lover》中高频的 love、want、know，既是粉色浪漫的直白宣言，也是30岁女性情感表达的成长印记。love既是浪漫告白（《Lover》），也指广义的爱（《The Archer》中自我接纳）。
</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page" style="background: linear-gradient(135deg, #8C4F66, #B8396B)">
            <div class="topsongs-container">
                <h3 style="color: #B8396B">专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="lvr-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>《Cruel Summer》以26.5亿播放量断层领先，不仅是《Lover》专辑的绝对王者，更成为Taylor职业生涯流媒体表现最强的现象级热单之一。</p>
                </div>
            </div>
        </section>

    </section>

    <!-- Folklore 部分 -->
    <section class="album-section" id="folklore-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-Folklore.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">Folklore</h2>
                    <p class="album-subtitle">隔离时期的诗意叙事 · 2021年格莱美年度专辑</p>
                    <p class="album-brief">黑白森林里的故事集，16首民谣编织的梦境与回忆</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="folklore-audio" src="songs/FOL.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="folklore-audio" style="padding: 10px 20px; font-size: 16px; background-color: #3E3E3E; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #3E3E3E, #5C5C5C)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/f/f8/Taylor_Swift_-_Folklore.png" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3 style="color:#3E3E3E; border-bottom: 2px solid #5C5C5C">专辑介绍</h3>
                        <p>《folklore》是泰勒·斯威夫特于2020年7月24日突然发布的第八张录音室专辑，这张在疫情期间创作的民谣专辑彻底颠覆了她以往的流行风格。专辑与The National乐队成员Aaron Dessner等合作，以极简的钢琴、吉他编曲构建出16首如短篇小说般的歌曲，其中《cardigan》《august》《betty》构成相互关联的"青少年三角恋"叙事三部曲。</p>
                        <p>该专辑获得2021年格莱美"年度专辑"大奖，成为史上首位三次获此殊荣的女歌手。特别的是，泰勒首次采用"角色扮演"创作手法，在《the last great american dynasty》中讲述艺术赞助人Rebekah Harkness的传奇人生，在《august》里化身夏日恋情的第三者，展现了前所未有的文学性表达。</p>
                        <p>专辑名小写"folklore"的刻意选择，暗示着对传统叙事的解构。实体专辑附带的手写歌词本中，泰勒用打字机字体和墨水渍效果强化了"复古手稿"的质感。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #545454, #3E3E3E)">
            <div class="wordcloud-container">
                <h3 style="color:#E7E7E7">歌词词云</h3>
                <p style="color:#E7E7E7">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/FOL_wordcloud.png" alt="Folklore专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7E7E7">比起《Lover》直白的浪漫宣言，folklore中'time'、'never'等词更多用于构建回忆的模糊性（如《august》的'never meant to stay'）和时光的沉淀感（《the 1》的'if one thing had been different'），展现从热烈当下到诗意回望的视角转变。
</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page" style="background: linear-gradient(135deg, #3E3E3E, #5C5C5C)">
            <div class="topsongs-container">
                <h3 style="color: #3E3E3E">专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="fol-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>冠军曲《cardigan》突破15亿播放量，与《Lover》数据对比可突出民谣专辑的"长尾效应"</p>
                </div>
            </div>
        </section>

    </section>

    <!-- Evermore 部分 -->
    <section class="album-section" id="evermore-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-Evermore.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">Evermore</h2>
                    <p class="album-subtitle">冬日续篇的诗意回声 · 格莱美双项提名</p>
                    <p class="album-brief">雪原与威士忌交织的故事集，folklore未说完的余韵</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="evermore-audio" src="songs/EVE.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="evermore-audio" style="padding: 10px 20px; font-size: 16px; background-color: #160E10; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #160E10, #421E18)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/0/0a/Taylor_Swift_-_Evermore.png" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3 style="color:#3E3E3E; border-bottom: 2px solid #5C5C5C">专辑介绍</h3>
                    <p>《evermore》作为《folklore》的姊妹篇，于2020年12月11日惊喜发行，是泰勒·斯威夫特在疫情期间创作的第二张民谣/另类风格专辑。专辑延续与Aaron Dessner、Justin Vernon的合作，但采用了更复杂的编曲结构——如《willow》的逆向吉他音效和《gold rush》的轰鸣式副歌。其中《no body, no crime》成为泰勒生涯首支乡村谋杀叙事曲，而《champagne problems》则以钢琴叙事刷新了她创作复杂度的新高。</p>
                    <p>尽管未大规模宣传，专辑仍获得2022年格莱美最佳流行演唱专辑提名。特别的是，泰勒在《coney island》中首次与The National主唱Matt Berninger合唱，在《ivy》中运用17世纪诗歌意象，并破天荒地在《closure》实验工业噪音元素，展现了比《folklore》更冒险的音乐探索。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #D37F55, #160E10)">
            <div class="wordcloud-container">
                <h3 style="color:#E7E7E7">歌词词云</h3>
                <p style="color:#E7E7E7">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/EVE_wordcloud.png" alt="Folklore专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7E7E7">相比《folklore》对时光的静观，evermore中'never'、'left'等词更多用于表现未完成的遗憾（《champagne problems》的'your heart was glass, I dropped it'）与瞬时的抉择（《ivy》的'one single thread of gold tied me to you'），用更锋利的词汇切割那些《folklore》中未能言尽的复杂情感。
</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page" style="background: linear-gradient(135deg, #160E10, #421E18)">
            <div class="topsongs-container">
                <h3 style="color: #421E18">专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="eve-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>相比前序专辑，《evermore》最高单曲《willow》仅9.3亿次，受众面收窄、实验性更强，也印证了冬日专辑更‘慢热’的特质——如同威士忌需要时间沉淀风味。</p>
                </div>
            </div>
        </section>

    </section>

    <!-- Midnights 部分 -->
    <section class="album-section" id="midnights-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-Midnights.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">Midnights</h2>
                    <p class="album-subtitle">不眠夜的电子自白 · 第66届格莱美年度专辑</p>
                    <p class="album-brief">从冬日沙滩到薰衣草迷雾，用视觉符号解构午夜心事的13种形态</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="midnights-audio" src="songs/MID.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="midnights-audio" style="padding: 10px 20px; font-size: 16px; background-color: #121D27; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #121D27, #5A658B)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/9/9f/Midnights_-_Taylor_Swift.png" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3 style="color:#121D27; border-bottom: 2px solid #5A658B">专辑介绍</h3>
                    <p>《Midnights》是泰勒·斯威夫特于2022年10月21日发行的第十张录音室专辑，这张以"13个不眠夜"为概念的专辑标志着她向合成器流行风格的彻底转型。专辑首支单曲《Anti-Hero》以自嘲式歌词打破Spotify单日播放纪录，而《Lavender Haze》则通过迷幻电子音效构建婚姻自由的宣言。特别的是，泰勒首次在《Snow On The Beach》中与Lana Del Rey合作，用飘渺的和声演绎"离奇却美妙"的浪漫。</p>
                    <p>该专辑成为2022年全球销量冠军，并帮助泰勒成为公告牌历史上首位包揽榜单前十的艺人。从《Mastermind》的精密编曲到《Karma》的玩味反击，13首歌曲如同钟表齿轮般咬合，完整呈现了午夜时分的自我对峙——正如她在《You're On Your Own, Kid》中唱的："Everything you lose is a step you take"。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #5A658B, #6F86A2)">
            <div class="wordcloud-container">
                <h3 style="color:#E7E7E7">歌词词云</h3>
                <p style="color:#E7E7E7">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/MID_wordcloud.png" alt="Midnights专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7E7E7">相比《folklore》的旁观叙事，这些词更“锋利”，服务于《Midnights》“自省与复仇”的双重命题。
</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page" style="background: linear-gradient(135deg, #121D27, #5A658B)">
            <div class="topsongs-container">
                <h3 style="color: #121D27">专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="mid-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>《Midnights》以《Anti-Hero》17亿播放量断层领跑，整体数据超越《Evermore》，延续了《Lover》的流行统治力，又以午夜电子音色开辟新纪元。</p>
                </div>
            </div>
        </section>

    </section>   

    <!-- TTPD 部分 -->
    <section class="album-section" id="ttpd-album">
        <!-- 第一页：专辑封面背景 + 标题 -->
        <section class="album-cover-page">
            <div class="album-cover-background" 
                style="background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.5)), 
                        url('img/img-TTPD.png') center/cover no-repeat;">
                <div class="album-title-container">
                    <h2 class="album-title">The Tortured Poets Department</h2>
                    <p class="album-subtitle">伤痕诗人的黑色浪漫 · 2024年流媒体破纪录专辑</p>
                    <p class="album-brief">社交媒体时代的诗性反抗，31首现代诗歌的暴烈与温柔</p>
                </div>
                <div class="album-audio-controls" style="text-align: center; padding: 20px;">
                    <audio id="TTPD-audio" src="songs/TPD.mp3"></audio> 
                    <button class="play-audio-btn" data-audio-id="TTPD-audio" style="padding: 10px 20px; font-size: 16px; background-color: #1C160F; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; animation: bounce 2s infinite;">
                        ▶ 
                    </button>
                </div>
            </div>
        </section>

        <section class="album-info-page" style="background: linear-gradient(135deg, #1C160F, #635B3A)">
            <div class="album-info-container">
                <div class="album-info-image">
                    <img src="https://upload.wikimedia.org/wikipedia/en/6/6e/Taylor_Swift_%E2%80%93_The_Tortured_Poets_Department_%28album_cover%29.png" 
                        alt="Taylor Swift Album Cover">
                </div>
                <div class="album-info-text">
                    <h3 style="color:#1C160F; border-bottom: 2px solid #635B3A">专辑介绍</h3>
                    <p>《The Tortured Poets Department》(TTPD) 是泰勒·斯威夫特于2024年4月19日发行的第11张录音室专辑，这张双碟专辑包含31首歌曲，被泰勒称为"最赤裸的自我解剖"。专辑与Jack Antonoff、Aaron Dessner合作，在《Fortnight》中实验工业合成器音效，在《So Long, London》回归钢琴叙事，而《Florida!!!》则与Florence Welch的戏剧化声线碰撞出末日狂欢感。特别的是，泰勒首次在《thanK you aIMee》中用隐藏字母拼写反击宿敌，在《The Manuscript》中以小说手稿形式重构分手记忆。</p>
                    <p>专辑打破Spotify首日3亿播放的全球纪录，并包揽Billboard单曲榜前14名。从打字机敲击声的intro到黑胶独有的《The Black Dog》，每首歌都像诗歌俱乐部的秘密档案——正如她在标题曲中唱的："You're not Dylan Thomas, I'm not Patti Smith... This is the tortured poets department"。</p>
                    <p>《TTPD》不仅是泰勒最私人化的作品，也是一次音乐与文学的跨界实验。</p>
                </div>
            </div>
        </section>

        <!-- 第三页：词云图 -->
        <section class="wordcloud-page" style="background: linear-gradient(135deg, #635B3A, #3F3824)">
            <div class="wordcloud-container">
                <h3 style="color:#E7E7E7">歌词词云</h3>
                <p style="color:#E7E7E7">本专辑高频词汇可视化</p>
                
                <div class="wordcloud-image-container">
                    <!-- 替换为你的词云图路径 -->
                    <img src="wordclouds/TPD_wordcloud.png" alt="TTPD专辑词云" class="wordcloud-image">
                </div>
                
                <div class="wordcloud-notes">
                    <p style="color: #E7E7E7">这些词汇构建了诗人般的独白语境——既是对过往恋情的审判性回溯（'said'），也是对时间（'time'）与因果（'cause'）的文学化解构，最终指向'know'的终极命题：自我认知。
</p>
                </div>
            </div>
        </section>

        <section class="topsongs-page" style="background: linear-gradient(135deg, #1C160F, #635B3A)">
            <div class="topsongs-container">
                <h3 style="color: #121D27">专辑 Top 6 歌曲播放量</h3>
                <p>本专辑最受欢迎的歌曲排行 (数据来源: Spotify 2024.12.11)</p>
                
                <div class="chart-container-2">
                    <svg id="tpd-chart" width="100%" height="400"></svg>
                </div>
                
                <div class="chart-notes">
                    <p>《TTPD》更多是写给自己的独白，是音乐风格完全的转变，传播上略逊，印证‘越疼痛的诗歌越难成为流行爆款’的专辑内核矛盾。</p>
                </div>
            </div>
        </section>

    </section>   

    

    <!-- 总结部分 -->
    <section class="summary-page">
        <div class="summary-background" 
            style="background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.9)), 
                    url('img/img-Eras.png') center/cover no-repeat;">
            <div class="summary-container">
                <h2>The Eras Tour on Data - 总结 List</h2>
                
                <!-- 风格转型分析 -->
                <div class="analysis-card">
                    <h3>🎵 音乐风格进化论</h3>
                    <ul>
                        <li><strong>乡村少女</strong>：首专到《Speak Now》的吉他叙事（词频TOP：<em>know, back, think</em>）</li>
                        <li><strong>流行女王</strong>：《1989》到《Lover》的合成器浪潮（词频TOP：<em>love, now, want</em>）</li>
                        <li><strong>民谣诗人</strong>：隔离时期的《folklore/evermore》（词频TOP：<em>time, never, one</em>）</li>
                        <li><strong>暗黑艺术家</strong>：《Midnights》到《TTPD》的电子自白（词频TOP：<em>cause, karma, said</em>）</li>
                    </ul>
                </div>

                <!-- 流量数据对比 -->
                <div class="analysis-card">
                    <h3>📊 流量密码解码</h3>
                    <div class="streams-comparison">
                        <div class="streams-item">
                            <div class="streams-bar" style="width: 64%; background: #FF9BB3;">26.5亿</div>
                            <span>Cruel Summer（历史第一）</span>
                        </div>
                        <div class="streams-item">
                            <div class="streams-bar" style="width: 41.5%; background: #1A5276;">17.2亿</div>
                            <span>Anti-Hero（电子转型巅峰）</span>
                        </div>
                        <div class="streams-item">
                            <div class="streams-bar" style="width: 22.4%; background: #5B7E7A;">9.3亿</div>
                            <span>willow（民谣天花板）</span>
                        </div>
                    </div>
                    <p class="footnote">* 数据反映：大众接受程度：流行＞电子＞民谣</p>
                </div>

                <!-- 未来展望 -->
                <div class="future-card">
                    <h3>✨ Next Chapter: TS12</h3>
                    <p>当《TTPD》还在撕裂榜单时，我们已开始期待——<br>
                    <span class="highlight">"What will Taylor reinvent next?"</span><br>
                    或许是摇滚歌剧？AI概念专辑？或是回归乡村的轮回？</p>
                </div>
            </div>
        </div>
    </section>

    </div>
    <script>
        
    const tooltip = d3.select("body").append("div")
        .attr("class", "tooltip")
        .style("position", "absolute")
        .style("visibility", "hidden")
        .style("padding", "8px")
        .style("background", "rgba(0,0,0,0.8)")
        .style("color", "white")
        .style("border-radius", "4px")
        .style("pointer-events", "none")
        .style("font-size", "14px")
        .style("z-index", "10");
    
    // 添加IntersectionObserver监听
    const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        const scrollHint = document.querySelector('.scroll-hint');
        if (entry.isIntersecting && (entry.target.classList.contains('screen-intro')||entry.target.classList.contains('screen-albums')
    ||entry.target.classList.contains('screen-overview'))) {
        scrollHint.style.color = 'black';
        } else {
        scrollHint.style.color = 'white';
        }
    });
    }, { threshold: 0.5 });

    // 监听第二页
    observer.observe(document.querySelector('.screen-intro'));
    observer.observe(document.querySelector('.screen-albums'));
    observer.observe(document.querySelector('.screen-overview'));
    </script>

    <script>
        // 专辑翻牌效果
        document.querySelectorAll('.album-card').forEach(card => {
            card.addEventListener('click', function() {
                this.classList.toggle('flipped');
            });
        });
    </script>


    <script>
        // 在现有script后添加
const albumColors = {
    "Taylor Swift": "#1D4737", // 首专红
    "Fearless": "#CBA863",    // 金色
    "Speak Now": "#833C63",   // 紫色
    "Red": "#A91E47",         // 正红
    "1989": "#846578",        // 道奇蓝
    "Reputation": "#2C2C2C",  // 黑色
    "Lover": "#EBBED3",       // 浅粉
    "Folklore": "#949494",    // 灰色
    "Evermore": "#421E18",    // 马鞍棕
    "Fearless (TV)": "#624324", // 同Fearless
    "Red (TV)": "#731803",      // 同Red
    "Midnights": "#5A658B",    // 午夜蓝
    "Speak Now (TV)": "#4a2454", // 同Speak Now
    "1989 (TV)": "#8BB5D2",     // 同1989
    "TTPD": "#1C160F"          // 勃艮第红
};



document.addEventListener('DOMContentLoaded', function() {
    // 加载数据
    d3.tsv("https://calvinxiaocao.github.io/taylor-swift/data/cots-album-details.tsv").then(function(data) {
            data.forEach(d => {
            if(d.Title === "The Tortured Poets Department") {
                d.Title = "TTPD";
            }
        });
        // 过滤掉"Other Songs"
        const albumData = data.filter(d => d.Title !== "Other Songs");
        const originData = data.filter(d => d.Title !== "Other Songs");
        
        // 转换数据类型
        albumData.forEach(d => {
            d.Songs = +d.Songs;
            d.Lines = +d.Lines;
            d.Words = +d.Words;
        });
        
        // 按歌曲数量排序
        albumData.sort((a, b) => b.Songs - a.Songs);
        
        // 创建饼图
        createPieChart(albumData);
        
        // 创建柱状图
        createBarChart(albumData);

        drawStreamsChart(originData);
    });
});

function createPieChart(data) {
    const width = window.innerWidth < 768 ? 200 : 400;
    const height = window.innerWidth < 768 ? 250 : 400;
    const radius = Math.min(width, height) / 2;
    
    const svg = d3.select("#pie-chart")
        .append("svg")
        .attr("width", width)
        .attr("height", height)
        .append("g")
        .attr("transform", `translate(${width/2},${height/2})`);
    

    const color = d3.scaleOrdinal()
    .domain(data.map(d => d.Title))
    .range(data.map(d => albumColors[d.Title] || "#999999"));
    
    // 饼图生成器
    const pie = d3.pie()
        .value(d => d.Songs)
        .sort(null);
    
    // 弧生成器
    const arc = d3.arc()
        .innerRadius(0)
        .outerRadius(radius);
    
    // 创建弧
    const arcs = svg.selectAll("arc")
        .data(pie(data))
        .enter()
        .append("g")
        .attr("class", "arc");
    
    // 添加路径
    arcs.append("path")
        .attr("d", arc)
        .attr("fill", d => color(d.data.Title))
        .attr("stroke", "white")
        .attr("stroke-width", 2)
        // .attrTween("d", function(d) {
        //     const interpolate = d3.interpolate({startAngle: 0, endAngle: 0}, d);
        //     return function(t) {
        //         return arc(interpolate(t));
        //     };
        // })
        .on("mouseover", function(event, d) {
            d3.select(this)
                .attr("stroke-width", 4)
                .attr("stroke", "#333");
            
            tooltip.html(`${d.data.Title}<br>${d.data.Songs}首`)
                .style("visibility", "visible");
        })
        .on("mousemove", function(event) {
            tooltip.style("top", `${event.pageY - 10}px`)
                .style("left", `${event.pageX + 10}px`);
        })
        .on("mouseout", function() {
            d3.select(this)
                .attr("stroke-width", 2)
                .attr("stroke", "white");
            
            tooltip.style("visibility", "hidden");
        });
        
    
    // 添加标签
    arcs.append("text")
        .attr("transform", d => `translate(${arc.centroid(d)})`)
        .attr("dy", "0.35em")
        .text(d => d.data.Songs)
        .style("text-anchor", "middle")
        .style("font-size", "12px")
        .style("font-weight", "bold")
        .style("fill", "white");
    
    // 添加图例
    const legend = d3.select("#pie-chart")
    .append("div")
    .attr("class", "legend")
    .style("display", "grid")
    .style("grid-template-columns", "repeat(3, 1fr)") // 改为3列
    .style("gap", "6px") // 缩小间隙
    // .style("margin-top", "20px")
    .style("position", "absolute") // 新增
    .style("bottom", "20px") // 新增 - 放到底部
    .style("left", "0") // 新增
    .style("right", "0") // 新增
    .style("padding", "0 20px"); // 新增 - 左右留白
    
    const legendItems = legend.selectAll(".legend-item")
        .data(data)
        .enter()
        .append("div")
        .attr("class", "legend-item")
        .style("display", "flex")
        .style("align-items", "center")
        .style("font-size", "12px");
    
    legendItems.append("div")
        .style("width", "12px")
        .style("height", "12px")
        .style("background-color", d => color(d.Title))
        .style("margin-right", "5px");
    
    legendItems.append("div")
        .text(d => `${d.Title} (${d.Songs})`);
}

function createBarChart(data) {
    let margin = {top: 20, right: 30, bottom: 40, left: 90};
    let width = 500 - margin.left - margin.right;
    let height = 400 - margin.top - margin.bottom;

    if (window.innerWidth < 768) {
        width = width / 2;
        height = height / 2;
        margin = {top: 8, right: 8, bottom: 8, left: 90};
    }
    
    const svg = d3.select("#bar-chart")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);
    
    // 颜色比例尺
    const color = d3.scaleOrdinal()
    .domain(data.map(d => d.Title))
    .range(data.map(d => albumColors[d.Title] || "#999999"));
    
    // X轴比例尺
    const x = d3.scaleLinear()
        .domain([0, d3.max(data, d => d.Songs)])
        .range([0, width]);
    
    // Y轴比例尺
    const y = d3.scaleBand()
        .domain(data.map(d => d.Title))
        .range([0, height])
        .padding(0.2);
    
    // 添加条形
    svg.selectAll("rect")
        .data(data)
        .enter()
        .append("rect")
        .attr("y", d => y(d.Title))
        .attr("width", 0)
        .attr("height", y.bandwidth())
        .attr("fill", d => color(d.Title))
        // .transition()
        // .duration(1000)
        .attr("width", d => x(d.Songs))
        .on("mouseover", function(event, d) {
            d3.select(this).attr("opacity", 0.8);
            tooltip.html(`${d.Title}<br>${d.Songs}首`)
                .style("visibility", "visible");
        })
        .on("mousemove", function(event) {
            tooltip.style("top", `${event.pageY - 10}px`)
                .style("left", `${event.pageX + 10}px`);
        })
        .on("mouseout", function() {
            d3.select(this).attr("opacity", 1);
            tooltip.style("visibility", "hidden");
        });
    
    // 添加数值标签
    svg.selectAll(".label")
        .data(data)
        .enter()
        .append("text")
        .attr("class", "label")
        .attr("x", d => x(d.Songs) + 5)
        .attr("y", d => y(d.Title) + y.bandwidth()/2)
        .attr("dy", "0.35em")
        .text(d => d.Songs)
        .style("font-size", "12px")
        .style("fill", "#333");
    
    // 添加Y轴
    svg.append("g")
        .call(d3.axisLeft(y).tickSize(0))
        .selectAll("text")
        .style("font-size", "12px");
    
    // 添加X轴
    svg.append("g")
        .attr("transform", `translate(0,${height})`)
        .call(d3.axisBottom(x).ticks(5))
        .selectAll("text")
        .style("font-size", "12px");

    svg.append("text")
    .attr("x", width / 2)
    .attr("y", height + margin.bottom - 2)  // 放在X轴下方
    .attr("text-anchor", "middle")
    .style("font-size", "18px")
    .style("font-weight", "bold")
    .text(`共 ${d3.sum(data, d => d.Songs)} 首歌曲`);
}

function drawStreamsChart(data) {

const albumIndexMap = new Map(data.map((d, i) => [d.Code, i]));

  // 1. 设置图表尺寸和边距
  const margin = {top: 40, right: 40, bottom: 60, left: 60};
  const width = 800 - margin.left - margin.right;
  const height = 400 - margin.top - margin.bottom;

  // 2. 创建SVG画布
  const svg = d3.select("#streams-chart")
    .attr("width", "100%") // 响应式宽度
    .attr("height", height + margin.top + margin.bottom)
    .attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
    .append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

  // 3. 定义比例尺（注意：x轴使用索引保持原始顺序）
const x = d3.scaleBand()
  .domain(data.map((d, i) => d.Code)) // 直接使用专辑名
  .range([0, width])
  .padding(0.2);

const y = d3.scaleLinear()
  .domain([0, d3.max(data, d => d.Streams) * 1.6])
  .range([height, 0]);

const xAxis = g => g
  .attr("transform", `translate(0,${height})`)
  .call(d3.axisBottom(x))
  .call(g => g.select(".domain").remove())
  .call(g => g.selectAll("text")
    .attr("transform", "rotate(-40)")
    .style("text-anchor", "end")
    .attr("dx", "-0.5em")
    .attr("dy", "0.5em")
    .style("font-size", "10px")); // 统一字号

const yAxis = g => g
  .call(d3.axisLeft(y)
    .tickFormat(d => `${d}亿次`)
    .tickSizeOuter(0))
  .call(g => g.select(".domain").remove())
  .call(g => g.selectAll(".tick text")
    .style("text-anchor", "end") // 右对齐
    .style("font-size", "12px"));

// 3.2 绘制坐标轴
svg.append("g").call(xAxis);
svg.append("g").call(yAxis);

//   svg.append("g")
//     .attr("transform", `translate(0,${height})`)
//     .call(d3.axisBottom(x).tickSize(0)) // 先隐藏默认标签
//     .selectAll(".tick text")
//     .text((d, i) => data[i].Album) // 自定义标签
//     .style("font-size", "10px")
//     .attr("transform", "rotate(-40)")
//     .attr("text-anchor", "end");
// 3.3 添加坐标轴标题
svg.append("text")
    .attr("x", width / 2)
    .attr("y", height + margin.bottom - 10)
    .attr("text-anchor", "middle")
    .text("专辑发行顺序");

svg.append("text")
    .attr("x", -margin.left)  // 更靠左
    .attr("y", -15)           // 上方偏移量
    .attr("text-anchor", "start")  // 左对齐
    .style("font-size", "13px")
    .style("font-weight", "bold")
    .text("Spotify播放量（亿次）");

  // 4. 绘制折线
  const line = d3.line()
    .x(d => x(d.Code) + x.bandwidth() / 2)
    .y(d => y(d.Streams));

  svg.append("path")
    .datum(data)
    .attr("fill", "none")
    .attr("stroke", "#FF8C00")
    .attr("stroke-width", 3)
    .attr("d", line);

  // 5. 添加坐标轴（示例代码，需完整实现）
  // ... (x轴显示专辑名称，y轴显示"亿次")

const tooltip = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("position", "absolute") // 新增
    .style("z-index", "9999") // 新增
    .style("opacity", 0);

// 4.1 绘制圆形交互点
svg.selectAll(".dot")
    .data(data)
    .enter()
    .append("circle")
    .attr("class", "dot")
    .attr("cx", d => x(d.Code) + x.bandwidth() / 2)
    .attr("cy", d => y(d.Streams))
    .attr("r", 6)
    .attr("fill", "#FF8C00")
    .attr("stroke", "white")
    .attr("stroke-width", 2)
    .on("mouseover", function(event, d) {
        tooltip
            .html(`
                <div class="tooltip-title">${d.Title}</div>
                <div>播放量: <strong>${d.Streams}亿次</strong></div>
                <div>发行年: ${d.ReleaseDate?.split("-")[0] || d.Year}</div>
            `)
            .style("left", `${event.pageX + 15}px`)
            .style("top", `${event.pageY - 45}px`)
            .transition()
            .duration(100)
            .style("opacity", 1);
    })
    .on("mouseout", function() {
        tooltip.transition()
            .duration(500)
            .style("opacity", 0);
    });
}
    </script>

<script>
// 通用Top Songs柱状图绘制函数
function renderTopSongsChart(containerId, data, albumColor = "#1D4737", left=300) {
    // 清除容器原有内容
    d3.select(`#${containerId}`).html("");
    
    // 设置边距和尺寸
    const margin = {top: 30, right: 150, bottom: 50, left: left},
          width = document.querySelector(`#${containerId}`).parentElement.clientWidth - margin.left - margin.right,
          height = 400 - margin.top - margin.bottom;

    // 创建SVG
    const svg = d3.select(`#${containerId}`)
        .attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

    // 比例尺
    const x = d3.scaleLinear()
        .domain([0, d3.max(data, d => d.streams)])
        .range([0, width])
        .nice();

    const y = d3.scaleBand()
        .domain(data.map(d => d.name))
        .range([0, height])
        .padding(0.2);

    // 绘制条形
    svg.selectAll(".bar")
        .data(data)
        .enter().append("rect")
        .attr("class", "bar")
        .attr("y", d => y(d.name))
        .attr("width", d => x(d.streams))
        .attr("height", y.bandwidth())
        .attr("fill", albumColor)
        .attr("rx", 4)
        .attr("ry", 4);

    // 添加歌曲名称标签
    svg.selectAll(".song-label")
        .data(data)
        .enter().append("text")
        .attr("class", "song-label")
        .attr("y", d => y(d.name) + y.bandwidth() / 2)
        .attr("x", -10)
        .attr("dy", "0.35em")
        .attr("text-anchor", "end")
        .text(d => d.name)
        .style("fill", albumColor)
        .style("font-size", "18px");

    // 添加播放量数值标签
    svg.selectAll(".streams-label")
        .data(data)
        .enter().append("text")
        .attr("class", "streams-label")
        .attr("y", d => y(d.name) + y.bandwidth() / 2)
        .attr("x", d => x(d.streams) + 10)
        .attr("dy", "0.35em")
        .text(d => d3.format(",")(d.streams))
        .style("fill", "black")
        .style("font-size", "13px")
        .style("font-weight", "bold");

    // 添加X轴
    svg.append("g")
        .attr("class", "x-axis")
        .attr("transform", `translate(0,${height})`)
        .call(d3.axisBottom(x).ticks(5).tickFormat(d => d3.format(".2s")(d)))
        .style("color", "#555");

    // 添加轴标题
    svg.append("text")
        .attr("x", width / 2)
        .attr("y", -10)
        .attr("text-anchor", "middle")
        .style("font-size", "14px")
        .style("font-weight", "bold")
        .text("播放量 (次)");
}

// 使用示例 (放在DOM加载完成后)
document.addEventListener('DOMContentLoaded', function() {
    // Taylor Swift专辑数据
    const tsData = [
        {name: "Our Song", rank: 1, streams: 381079025},
        {name: "Teardrops on My Guitar", rank: 2, streams: 230912121},
        {name: "Picture to Burn", rank: 3, streams: 214738354},
        {name: "Tim McGraw", rank: 4, streams: 143295618},
        {name: "Should've Said No", rank: 5, streams: 133982292},
        {name: "I'm Only Me When I'm with You", rank: 6, streams: 56984746}
    ];

    const ferData = [
        {name: "Love Story", rank: 1, streams: 1846727185},
        {name: "You Belong With Me", rank: 2, streams: 1477845320},
        {name: "The Way I Loved You", rank: 3, streams: 533133086},
        {name: "Fearless", rank: 4, streams: 485048681},
        {name: "Mr. Perfectly Fine (From The Vault)", rank: 5, streams: 402348529},
        {name: "Fifteen", rank: 6, streams: 234159974}
    ];

    const spnData = [
        {name: "Enchanted", rank: 1, streams: 1233029427},
        {name: "Back To December", rank: 2, streams: 645101726},
        {name: "Mine", rank: 3, streams: 441463343},
        {name: "Mean", rank: 4, streams: 354125081},
        {name: "Better Than Revenge", rank: 5, streams: 349500243},
        {name: "Sparks Fly", rank: 6, streams: 333537677}
    ];

    const redData = [
        {name: "I Knew You Were Trouble", rank: 1, streams: 1321952702},
        {name: "We Are Never Ever Getting Back Together", rank: 2, streams: 1099394789},
        {name: "All Too Well (10 Minute Version)", rank: 3, streams: 948522404},
        {name: "22", rank: 4, streams: 742883584},
        {name: "Red", rank: 5, streams: 587326135},
        {name: "All Too Well", rank: 6, streams: 552238308}
    ];

    const nenData = [
        {name: "Blank Space", rank: 1, streams: 2225733344},
        {name: "Wildest Dreams", rank: 2, streams: 1850095609},
        {name: "Shake It Off", rank: 3, streams: 1693721646},
        {name: "Style", rank: 4, streams: 1606119283},
        {name: "Bad Blood", rank: 5, streams: 754383719},
        {name: "Out Of The Woods", rank: 6, streams: 503988499}
    ];

    const repData = [
        {name: "Don't Blame Me", rank: 1, streams: 1282469112},
        {name: "Look What You Made Me Do", rank: 2, streams: 1247741832},
        {name: "Delicate", rank: 3, streams: 1083537095},
        {name: "...Ready For It?", rank: 4, streams: 828328013},
        {name: "Getaway Car", rank: 5, streams: 735114444},
        {name: "Gorgeous", rank: 6, streams: 644571909}
    ];

    const lvrData = [
        {name: "Cruel Summer", rank: 1, streams: 2651376383},
        {name: "Lover", rank: 2, streams: 1622204705},
        {name: "You Need To Calm Down", rank: 3, streams: 1009634809},
        {name: "Me!", rank: 4, streams: 900157208},
        {name: "The Man", rank: 5, streams: 861606138},
        {name: "Paper Rings", rank: 6, streams: 708845737}
    ];

    const folkloreData = [
        {name: "cardigan", rank: 1, streams: 1504914899},
        {name: "august", rank: 2, streams: 1329114670},
        {name: "exile", rank: 3, streams: 842686063},
        {name: "the 1", rank: 4, streams: 631056278},
        {name: "my tears ricochet", rank: 5, streams: 597219667},
        {name: "illicit affairs", rank: 6, streams: 481652161}
    ];

    const evermoreData = [
        {name: "willow", rank: 1, streams: 930942882},
        {name: "champagne problems", rank: 2, streams: 691387528},
        {name: "right where you left me", rank: 3, streams: 378759128},
        {name: "tolerate it", rank: 4, streams: 356992094},
        {name: "gold rush", rank: 5, streams: 312894733},
        {name: "no body, no crime", rank: 6, streams: 301562103}
    ];

    const midnightsData = [
        {name: "Anti-Hero", rank: 1, streams: 1729600671},
        {name: "Karma", rank: 2, streams: 868736933},
        {name: "Lavender Haze", rank: 3, streams: 778883256},
        {name: "Midnight Rain", rank: 4, streams: 726088047},
        {name: "You're On Your Own, Kid", rank: 5, streams: 671159165},
        {name: "Bejeweled", rank: 6, streams: 601815883}
    ];

    const ttpdData = [
        {name: "Fortnight", rank: 1, streams: 766421062},
        {name: "I Can Do It With a Broken Heart", rank: 2, streams: 538166031},
        {name: "Down Bad", rank: 3, streams: 368720558},
        {name: "Guilty as Sin?", rank: 4, streams: 343412036},
        {name: "Who's Afraid of Little Old Me?", rank: 5, streams: 300270639},
        {name: "So Long, London", rank: 6, streams: 292915849}
    ];
    
    // 调用函数渲染图表
    renderTopSongsChart("tsw-chart", tsData, "#1D4737");
    renderTopSongsChart("fer-chart", ferData, "#6E4823");
    renderTopSongsChart("spn-chart", spnData, "#2A122C");
    renderTopSongsChart("red-chart", redData, "#400303", left=350);
    renderTopSongsChart("nen-chart", nenData, "#5D4E5D", left=250);
    renderTopSongsChart("rep-chart", repData, "#2C2C2C");
    renderTopSongsChart("lvr-chart", lvrData, "#8C4F66");
    renderTopSongsChart("fol-chart", folkloreData, "#3E3E3E", left=250);
    renderTopSongsChart("eve-chart", evermoreData, "#421E18", left=250);
    renderTopSongsChart("mid-chart", midnightsData, "#121D27");
    renderTopSongsChart("tpd-chart", ttpdData, "#1C160F");
    
    // 其他专辑调用示例 (假设有不同颜色)
    // renderTopSongsChart("fearless-chart", fearlessData, "#D4AF37"); 
    // renderTopSongsChart("red-chart", redData, "#FF0000");
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const playButtons = document.querySelectorAll(".play-audio-btn");
    let currentAudio = null;
    let currentButton = null;

    playButtons.forEach(button => {
        button.addEventListener("click", () => {
            const audioId = button.getAttribute("data-audio-id");
            const audio = document.getElementById(audioId);

            // 如果点击的是正在播放的音频，执行暂停
            if (currentAudio === audio && !audio.paused) {
                audio.pause();
                button.textContent = "▶";
                currentAudio = null;
                currentButton = null;
                return;
            }

            // 如果已有其他音频在播放，先暂停它
            if (currentAudio && currentAudio !== audio) {
                currentAudio.pause();
                if (currentButton) {
                    currentButton.textContent = "▶";
                }
            }

            // 播放当前音频
            audio.play();
            button.textContent = "⏸";
            currentAudio = audio;
            currentButton = button;

            // 当音频播放结束后，重置按钮文字
            audio.addEventListener("ended", () => {
                button.textContent = "▶";
                currentAudio = null;
                currentButton = null;
            });
        });
    });
});
</script>


</body>
</html>
